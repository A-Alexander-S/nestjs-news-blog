<h1>Редактирование профиля</h1>
<h6>Привет, {{firstName}}!</h6>
<form method="post" action="/news/api" enctype="multipart/form-data">
  <div class="mb-3">
    <label for="firstName" class="form-label">Имя</label>
    <input class="form-control" name="firstName" id="firstName" value="{{firstName}}">
  </div>
  <div class="mb-3">
    <label for="email" class="form-label">email</label>
    <input class="form-control" type="email" name="email" id="email" value="{{email}}">
  </div>
  <div class="mb-3">
    <label for="password" class="form-label">Новый пароль</label>
    <input class="form-control" name="password" id="password">
  </div>
  <button type="button" class="btn btn-primary" onclick='sendForm()'>Редактировать</button>
</form>


<script>
  function sendForm() {

    var data = new FormData($('form')[0]);

    //var data = $('form')[0];
    //console.log(data);

    //axios.patch('/users/api', {
    //  firstName: '111',
    //  email: '',
    //  password: '',
    //}, {
    //  headers: {
    //    'content-type': 'application/json',
    //    "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNjQyNTg1OTM1LCJleHAiOjE2NDI1ODk1MzV9.oF_6eE0GS85bqRvk7yCugWIC5I7L6oT8YeAi_-ioLiM"
    //  }
    //})
    //  .then(response => {
    //    console.log(response)
    //  })
    //  .catch(error => {
    //    console.log(error.response)
    //  });

    console.log('sdfsfsd');

    axios({
      method: 'PATCH',
      headers: {
        'content-type': 'application/json',
        "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNjQyNTg1OTM1LCJleHAiOjE2NDI1ODk1MzV9.oF_6eE0GS85bqRvk7yCugWIC5I7L6oT8YeAi_-ioLiM"
      },
      data: { firstName: $('#firstName')[0].value, email: $('#email')[0].value, password: $('#password')[0].value },
      url: '/users/api',
    }).then((data) => {
      window.location.reload()
    }).catch(error => {
      console.log(error.response)
    });

  }
</script>